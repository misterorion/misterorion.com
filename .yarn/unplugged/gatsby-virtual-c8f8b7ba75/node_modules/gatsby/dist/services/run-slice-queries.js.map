{"version":3,"file":"run-slice-queries.js","names":["runSliceQueries","parentSpan","queryIds","store","program","graphqlRunner","assertStore","sliceQueryIds","length","state","getState","activity","reporter","createProgress","id","start","processSliceQueries","graphqlTracing","done"],"sources":["../../src/services/run-slice-queries.ts"],"sourcesContent":["import { processSliceQueries } from \"../query\"\nimport reporter from \"gatsby-cli/lib/reporter\"\nimport { IQueryRunningContext } from \"../state-machines/query-running/types\"\nimport { assertStore } from \"../utils/assert-store\"\n\nexport async function runSliceQueries({\n  parentSpan,\n  queryIds,\n  store,\n  program,\n  graphqlRunner,\n}: Partial<IQueryRunningContext>): Promise<void> {\n  assertStore(store)\n\n  if (!queryIds) {\n    return\n  }\n  const { sliceQueryIds } = queryIds\n  if (!sliceQueryIds.length) {\n    return\n  }\n\n  const state = store.getState()\n  const activity = reporter.createProgress(\n    `run slice queries`,\n    sliceQueryIds.length,\n    0,\n    {\n      id: `slice-query-running`,\n      parentSpan,\n    }\n  )\n\n  activity.start()\n\n  await processSliceQueries(sliceQueryIds, {\n    state,\n    activity,\n    graphqlRunner,\n    graphqlTracing: program?.graphqlTracing,\n  })\n\n  activity.done()\n}\n"],"mappings":";;;;;;;AAAA;;AACA;;AAEA;;AAEO,eAAeA,eAAf,CAA+B;EACpCC,UADoC;EAEpCC,QAFoC;EAGpCC,KAHoC;EAIpCC,OAJoC;EAKpCC;AALoC,CAA/B,EAM0C;EAC/C,IAAAC,wBAAA,EAAYH,KAAZ;;EAEA,IAAI,CAACD,QAAL,EAAe;IACb;EACD;;EACD,MAAM;IAAEK;EAAF,IAAoBL,QAA1B;;EACA,IAAI,CAACK,aAAa,CAACC,MAAnB,EAA2B;IACzB;EACD;;EAED,MAAMC,KAAK,GAAGN,KAAK,CAACO,QAAN,EAAd;;EACA,MAAMC,QAAQ,GAAGC,iBAAA,CAASC,cAAT,CACd,mBADc,EAEfN,aAAa,CAACC,MAFC,EAGf,CAHe,EAIf;IACEM,EAAE,EAAG,qBADP;IAEEb;EAFF,CAJe,CAAjB;;EAUAU,QAAQ,CAACI,KAAT;EAEA,MAAM,IAAAC,0BAAA,EAAoBT,aAApB,EAAmC;IACvCE,KADuC;IAEvCE,QAFuC;IAGvCN,aAHuC;IAIvCY,cAAc,EAAEb,OAAF,aAAEA,OAAF,uBAAEA,OAAO,CAAEa;EAJc,CAAnC,CAAN;EAOAN,QAAQ,CAACO,IAAT;AACD"}