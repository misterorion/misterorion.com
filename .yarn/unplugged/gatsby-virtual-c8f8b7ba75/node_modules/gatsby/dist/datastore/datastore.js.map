{"version":3,"file":"datastore.js","names":["dataStore","getDataStore","setupLmdbStore","require","emitter","on"],"sources":["../../src/datastore/datastore.ts"],"sourcesContent":["import { IDataStore } from \"./types\"\nimport { emitter } from \"../redux\"\n\nlet dataStore: IDataStore\n\nexport function getDataStore(): IDataStore {\n  if (!dataStore) {\n    const { setupLmdbStore } = require(`./lmdb/lmdb-datastore`)\n    dataStore = setupLmdbStore()\n  }\n  return dataStore\n}\n\n// It is possible that the store is not initialized yet when calling `DELETE_CACHE`.\n//  The code below ensures we wipe cache from the proper store\n//  (mostly relevant for tests)\nemitter.on(`DELETE_CACHE`, () => {\n  getDataStore()\n})\n"],"mappings":";;;;;AACA;;AAEA,IAAIA,SAAJ;;AAEO,SAASC,YAAT,GAAoC;EACzC,IAAI,CAACD,SAAL,EAAgB;IACd,MAAM;MAAEE;IAAF,IAAqBC,OAAO,CAAE,uBAAF,CAAlC;;IACAH,SAAS,GAAGE,cAAc,EAA1B;EACD;;EACD,OAAOF,SAAP;AACD,C,CAED;AACA;AACA;;;AACAI,cAAA,CAAQC,EAAR,CAAY,cAAZ,EAA2B,MAAM;EAC/BJ,YAAY;AACb,CAFD"}