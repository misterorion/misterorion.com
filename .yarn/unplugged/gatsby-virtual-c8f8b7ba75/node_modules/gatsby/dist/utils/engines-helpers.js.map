{"version":3,"file":"engines-helpers.js","names":["shouldPrintEngineSnapshot","process","env","gatsby_executing_command","generate","shouldSendTelemetryForHeadAPI","shouldGenerateEngines","emitter","on","action","payload","mode","serverData","config","Head","trackFeatureIsUsed"],"sources":["../../src/utils/engines-helpers.ts"],"sourcesContent":["import { emitter } from \"../redux\"\nimport { ICreatePageAction, ISetComponentFeatures } from \"../redux/types\"\nimport { trackFeatureIsUsed } from \"gatsby-telemetry\"\n\nexport function shouldPrintEngineSnapshot(): boolean {\n  return process.env.gatsby_executing_command === `build`\n}\n\nlet generate = false\nlet shouldSendTelemetryForHeadAPI = true\nexport function shouldGenerateEngines(): boolean {\n  return process.env.gatsby_executing_command === `build` && generate\n}\n\nemitter.on(`CREATE_PAGE`, (action: ICreatePageAction) => {\n  if (action.payload.mode && action.payload.mode !== `SSG`) generate = true\n})\nemitter.on(`SET_COMPONENT_FEATURES`, (action: ISetComponentFeatures) => {\n  if (action.payload.serverData) generate = true\n  if (action.payload.config) generate = true\n  if (action.payload.Head && shouldSendTelemetryForHeadAPI) {\n    trackFeatureIsUsed(`HeadAPI`)\n    shouldSendTelemetryForHeadAPI = false\n  }\n})\n"],"mappings":";;;;;;AAAA;;AAEA;;AAEO,SAASA,yBAAT,GAA8C;EACnD,OAAOC,OAAO,CAACC,GAAR,CAAYC,wBAAZ,KAA0C,OAAjD;AACD;;AAED,IAAIC,QAAQ,GAAG,KAAf;AACA,IAAIC,6BAA6B,GAAG,IAApC;;AACO,SAASC,qBAAT,GAA0C;EAC/C,OAAOL,OAAO,CAACC,GAAR,CAAYC,wBAAZ,KAA0C,OAA1C,IAAoDC,QAA3D;AACD;;AAEDG,cAAA,CAAQC,EAAR,CAAY,aAAZ,EAA2BC,MAAD,IAA+B;EACvD,IAAIA,MAAM,CAACC,OAAP,CAAeC,IAAf,IAAuBF,MAAM,CAACC,OAAP,CAAeC,IAAf,KAAyB,KAApD,EAA0DP,QAAQ,GAAG,IAAX;AAC3D,CAFD;;AAGAG,cAAA,CAAQC,EAAR,CAAY,wBAAZ,EAAsCC,MAAD,IAAmC;EACtE,IAAIA,MAAM,CAACC,OAAP,CAAeE,UAAnB,EAA+BR,QAAQ,GAAG,IAAX;EAC/B,IAAIK,MAAM,CAACC,OAAP,CAAeG,MAAnB,EAA2BT,QAAQ,GAAG,IAAX;;EAC3B,IAAIK,MAAM,CAACC,OAAP,CAAeI,IAAf,IAAuBT,6BAA3B,EAA0D;IACxD,IAAAU,mCAAA,EAAoB,SAApB;IACAV,6BAA6B,GAAG,KAAhC;EACD;AACF,CAPD"}