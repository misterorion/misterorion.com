{"version":3,"file":"run-page-queries.js","names":["runPageQueries","parentSpan","queryIds","store","program","graphqlRunner","assertStore","state","getState","pageQueryIds","length","activity","reporter","createProgress","id","processPageQueries","graphqlTracing"],"sources":["../../src/services/run-page-queries.ts"],"sourcesContent":["import { processPageQueries } from \"../query\"\nimport reporter from \"gatsby-cli/lib/reporter\"\nimport { IQueryRunningContext } from \"../state-machines/query-running/types\"\nimport { assertStore } from \"../utils/assert-store\"\n\nexport async function runPageQueries({\n  parentSpan,\n  queryIds,\n  store,\n  program,\n  graphqlRunner,\n}: Partial<IQueryRunningContext>): Promise<void> {\n  assertStore(store)\n  const state = store.getState()\n\n  if (!queryIds) {\n    return\n  }\n\n  const { pageQueryIds } = queryIds\n\n  if (pageQueryIds.length === 0) {\n    return\n  }\n\n  const activity = reporter.createProgress(\n    `run page queries`,\n    pageQueryIds.length,\n    0,\n    {\n      id: `page-query-running`,\n      parentSpan,\n    }\n  )\n\n  await processPageQueries(pageQueryIds, {\n    state,\n    activity,\n    graphqlRunner,\n    graphqlTracing: program?.graphqlTracing,\n  })\n}\n"],"mappings":";;;;;;;AAAA;;AACA;;AAEA;;AAEO,eAAeA,cAAf,CAA8B;EACnCC,UADmC;EAEnCC,QAFmC;EAGnCC,KAHmC;EAInCC,OAJmC;EAKnCC;AALmC,CAA9B,EAM0C;EAC/C,IAAAC,wBAAA,EAAYH,KAAZ;EACA,MAAMI,KAAK,GAAGJ,KAAK,CAACK,QAAN,EAAd;;EAEA,IAAI,CAACN,QAAL,EAAe;IACb;EACD;;EAED,MAAM;IAAEO;EAAF,IAAmBP,QAAzB;;EAEA,IAAIO,YAAY,CAACC,MAAb,KAAwB,CAA5B,EAA+B;IAC7B;EACD;;EAED,MAAMC,QAAQ,GAAGC,iBAAA,CAASC,cAAT,CACd,kBADc,EAEfJ,YAAY,CAACC,MAFE,EAGf,CAHe,EAIf;IACEI,EAAE,EAAG,oBADP;IAEEb;EAFF,CAJe,CAAjB;;EAUA,MAAM,IAAAc,yBAAA,EAAmBN,YAAnB,EAAiC;IACrCF,KADqC;IAErCI,QAFqC;IAGrCN,aAHqC;IAIrCW,cAAc,EAAEZ,OAAF,aAAEA,OAAF,uBAAEA,OAAO,CAAEY;EAJY,CAAjC,CAAN;AAMD"}