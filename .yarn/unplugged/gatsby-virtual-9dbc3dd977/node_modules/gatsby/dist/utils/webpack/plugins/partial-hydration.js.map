{"version":3,"file":"partial-hydration.js","names":["ClientReferenceDependency","ModuleDependency","constructor","request","type","PartialHydrationPlugin","name","_references","_clientModules","Set","manifestPath","rootFilePath","_manifestPath","_rootFilePath","_generateClientReferenceChunk","reference","module","rootContext","chunkName","Template","toPath","path","relative","userRequest","dep","rawRequest","block","webpack","AsyncDependenciesBlock","undefined","addDependency","addBlock","_generateManifest","_chunkGroups","moduleGraph","chunkGraph","json","recordModule","id","exports","chunkIds","resource","normalModule","moduleExports","forEach","originalExport","resolvedExport","chunks","href","url","pathToFileURL","replace","toRecord","Map","clientModule","connection","getIncomingConnections","dependency","has","childMap","set","exportInfo","getExportsInfo","isReexport","targetInfo","getTarget","get","push","export","originalModule","resolvedMap","resolvedModule","chunk","getModuleChunksIterable","group","groupsIterable","chunkInGroup","add","moduleId","getModuleId","Array","from","clear","apply","compiler","hooks","thisCompilation","tap","compilation","normalModuleFactory","dependencyFactories","dependencyTemplates","NullDependency","handler","parser","program","ast","hasClientExportDirective","body","find","statement","directive","state","optimizeChunkModules","options","context","selectedChunks","addChunk","chunkReason","connectChunkAndModule","connectedChunk","disconnectChunkAndModule","split","for","processAssets","stage","Compilation","PROCESS_ASSETS_STAGE_REPORT","manifest","chunkGroups","emitAsset","sources","RawSource","JSON","stringify"],"sources":["../../../../src/utils/webpack/plugins/partial-hydration.ts"],"sourcesContent":["import * as path from \"path\"\nimport Template from \"webpack/lib/Template\"\nimport ModuleDependency from \"webpack/lib/dependencies/ModuleDependency\"\nimport NullDependency from \"webpack/lib/dependencies/NullDependency\"\nimport url from \"url\"\nimport webpack, { Module, NormalModule, Dependency, javascript } from \"webpack\"\n\ninterface IModuleExport {\n  id: string\n  chunks: Array<string>\n  name: string\n}\n\ninterface IDirective {\n  directive?: string\n}\n\n/**\n * @see https://github.com/facebook/react/blob/3f70e68cea8d2ed0f53d35420105ae20e22ce428/packages/react-server-dom-webpack/src/ReactFlightWebpackPlugin.js#L27-L35\n */\nclass ClientReferenceDependency extends ModuleDependency {\n  constructor(request) {\n    super(request)\n  }\n\n  get type(): string {\n    return `client-reference`\n  }\n}\n\n/**\n * inspiration and code mostly comes from https://github.com/facebook/react/blob/3f70e68cea8d2ed0f53d35420105ae20e22ce428/packages/react-server-dom-webpack/src/ReactFlightWebpackPlugin.js\n */\nexport class PartialHydrationPlugin {\n  name = `PartialHydrationPlugin`\n  _manifestPath: string\n  _rootFilePath: string\n  _references: Array<ClientReferenceDependency> = []\n  _clientModules = new Set<webpack.NormalModule>()\n\n  constructor(manifestPath: string, rootFilePath: string) {\n    this._manifestPath = manifestPath\n    this._rootFilePath = rootFilePath\n  }\n\n  _generateClientReferenceChunk(\n    reference: NormalModule,\n    module: NormalModule,\n    rootContext: string\n  ): void {\n    const chunkName = Template.toPath(\n      // @ts-ignore - types are incorrect\n      path.relative(rootContext, reference.userRequest)\n    )\n\n    const dep = new ClientReferenceDependency(reference.rawRequest)\n    const block = new webpack.AsyncDependenciesBlock(\n      {\n        name: chunkName,\n      },\n      undefined,\n      // @ts-ignore - types are incorrect\n      reference.request\n    )\n\n    block.addDependency(dep as Dependency)\n    module.addBlock(block)\n  }\n\n  _generateManifest(\n    _chunkGroups: webpack.Compilation[\"chunkGroups\"],\n    moduleGraph: webpack.Compilation[\"moduleGraph\"],\n    chunkGraph: webpack.Compilation[\"chunkGraph\"],\n    rootContext: string\n  ): Record<string, Record<string, IModuleExport>> {\n    const json: Record<string, Record<string, IModuleExport>> = {}\n    // @see https://github.com/facebook/react/blob/3f70e68cea8d2ed0f53d35420105ae20e22ce428/packages/react-server-dom-webpack/src/ReactFlightWebpackPlugin.js#L220-L252\n    const recordModule = (\n      id: string,\n      module: Module | NormalModule,\n      exports: Array<{ originalExport: string; resolvedExport: string }>,\n      chunkIds: Array<string>\n    ): void => {\n      if (\n        // @ts-ignore - types are incorrect\n        !module.resource\n      ) {\n        return\n      }\n\n      const normalModule: NormalModule = module as NormalModule\n\n      const moduleExports: Record<string, IModuleExport> = {}\n      exports.forEach(({ originalExport, resolvedExport }) => {\n        moduleExports[originalExport] = {\n          id: id,\n          chunks: chunkIds,\n          name: resolvedExport,\n        }\n      })\n\n      const href = url\n        .pathToFileURL(normalModule.resource)\n        .href.replace(rootContext.replace(/\\\\/g, `/`), ``)\n        .replace(/file:\\/{3,4}/g, `file://`)\n      if (href !== undefined) {\n        json[href] = moduleExports\n      }\n    }\n\n    const toRecord: Map<\n      webpack.Module,\n      Map<\n        webpack.Module,\n        Array<{\n          originalExport: string\n          resolvedExport: string\n        }>\n      >\n    > = new Map()\n    for (const clientModule of this._clientModules) {\n      for (const connection of moduleGraph.getIncomingConnections(\n        clientModule\n      )) {\n        if (connection.dependency) {\n          if (toRecord.has(connection.module)) {\n            continue\n          }\n\n          // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n          const childMap = new Map()\n          toRecord.set(connection.module, childMap)\n\n          for (const exportInfo of moduleGraph.getExportsInfo(connection.module)\n            .exports) {\n            if (exportInfo.isReexport()) {\n              // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n              const targetInfo = exportInfo.getTarget(moduleGraph)!\n              if (!childMap.has(targetInfo.module)) {\n                childMap.set(targetInfo.module, [])\n              }\n\n              childMap.get(targetInfo.module)?.push({\n                originalExport: exportInfo.name,\n                // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n                resolvedExport: targetInfo.export![0],\n              })\n            } else {\n              if (!childMap.has(connection.module)) {\n                childMap.set(connection.module, [])\n              }\n\n              childMap.get(connection.module)?.push({\n                originalExport: exportInfo.name,\n                resolvedExport: exportInfo.name,\n              })\n            }\n          }\n        }\n      }\n    }\n\n    for (const [originalModule, resolvedMap] of toRecord) {\n      for (const [resolvedModule, exports] of resolvedMap) {\n        const chunkIds: Set<string> = new Set()\n        for (const chunk of chunkGraph.getModuleChunksIterable(\n          resolvedModule\n        )) {\n          for (const group of chunk.groupsIterable) {\n            for (const chunkInGroup of group.chunks) {\n              if (chunkInGroup.id) {\n                chunkIds.add(chunkInGroup.id as string)\n              }\n            }\n          }\n        }\n\n        const moduleId = chunkGraph.getModuleId(resolvedModule) as string\n        recordModule(moduleId, originalModule, exports, Array.from(chunkIds))\n      }\n    }\n\n    toRecord.clear()\n\n    return json\n  }\n\n  apply(compiler: webpack.Compiler): void {\n    compiler.hooks.thisCompilation.tap(\n      this.name,\n      (compilation, { normalModuleFactory }) => {\n        // tell webpack that this is a regular javascript module\n        compilation.dependencyFactories.set(\n          ClientReferenceDependency as ModuleDependency,\n          normalModuleFactory\n        )\n        // don't add extra code to the source file\n        compilation.dependencyTemplates.set(\n          ClientReferenceDependency as ModuleDependency,\n          new NullDependency.Template()\n        )\n\n        // const entryModule: webpack.NormalModule | null = null\n        const handler = (parser: javascript.JavascriptParser): void => {\n          parser.hooks.program.tap(this.name, ast => {\n            const hasClientExportDirective = ast.body.find(\n              statement =>\n                statement.type === `ExpressionStatement` &&\n                (statement as IDirective).directive === `client export`\n            )\n\n            const module = parser.state.module\n\n            if (hasClientExportDirective) {\n              this._clientModules.add(module)\n\n              // if (entryModule) {\n              //   console.log(`parse`, module.resource)\n              //   this._generateClientReferenceChunk(\n              //     module,\n              //     entryModule,\n              //     compilation.options.context as string\n              //   )\n              //   entryModule.invalidateBuild()\n              // }\n            }\n\n            // if (module.resource.includes(`production-app`) && !entryModule) {\n            //   entryModule = module\n\n            //   for (const clientModule of this._clientModules) {\n            //     this._generateClientReferenceChunk(\n            //       clientModule,\n            //       entryModule,\n            //       compilation.options.context as string\n            //     )\n            //   }\n            // }\n          })\n        }\n\n        compilation.hooks.optimizeChunkModules.tap(\n          this.name,\n          // eslint-disable-next-line @typescript-eslint/no-unused-vars\n          () => {\n            // 1. move clientModules into their own chunk\n            // 2. disconnect module from original chunk\n\n            for (const clientModule of this._clientModules) {\n              const chunkName = Template.toPath(\n                // @ts-ignore - types are incorrect\n                path.relative(\n                  compilation.options.context as string,\n                  clientModule.userRequest\n                )\n              )\n\n              const selectedChunks = Array.from(\n                compilation.chunkGraph.getModuleChunksIterable(clientModule)\n              )\n              const chunk = compilation.addChunk(chunkName)\n              chunk.chunkReason = `PartialHydration client module`\n              compilation.chunkGraph.connectChunkAndModule(chunk, clientModule)\n\n              for (const connectedChunk of selectedChunks) {\n                compilation.chunkGraph.disconnectChunkAndModule(\n                  connectedChunk,\n                  clientModule\n                )\n                connectedChunk.split(chunk)\n              }\n            }\n          }\n        )\n\n        normalModuleFactory.hooks.parser\n          .for(`javascript/auto`)\n          .tap(this.name, handler)\n        normalModuleFactory.hooks.parser\n          .for(`javascript/esm`)\n          .tap(this.name, handler)\n        normalModuleFactory.hooks.parser\n          .for(`javascript/dynamic`)\n          .tap(this.name, handler)\n\n        compilation.hooks.processAssets.tap(\n          {\n            name: this.name,\n            stage: webpack.Compilation.PROCESS_ASSETS_STAGE_REPORT,\n          },\n          () => {\n            const manifest = this._generateManifest(\n              compilation.chunkGroups,\n              compilation.moduleGraph,\n              compilation.chunkGraph,\n              compilation.options.context as string\n            )\n\n            compilation.emitAsset(\n              this._manifestPath,\n              new webpack.sources.RawSource(\n                JSON.stringify(manifest, null, 2),\n                false\n              )\n            )\n          }\n        )\n      }\n    )\n  }\n}\n"],"mappings":"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"}